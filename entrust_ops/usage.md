_This file is automatically generated._

# entrust_ops

```
This tool is used during HSM key ceremonies to run pre-determined commands.

Usage: entrust_ops [OPTIONS] <COMMAND>

Commands:
  feature    Manage optional HSM capabilities
  firmware   Manage HSM firmware
  hsm        Manage the core aspects of the HSM
  meta       Commands about this tool
  realm      Commands for Juicebox-specific HSM and realm initialization
  sign       Manage signing keys and sign HSM software and userdata
  smartcard  Manage HSM smartcards (which can contain sensitive keys)
  help       Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

## entrust_ops feature

```
Manage optional HSM capabilities.

Features can be enabled with a certificate from Entrust. This tool supports enabling features using certificates in plain files (but certificates can also be delivered on smartcards). Most features are static: once enabled they cannot be disabled, even by erasing the HSM.

Usage: entrust_ops feature [OPTIONS] <COMMAND>

Commands:
  activate  Enable an HSM feature
  info      Print which features have been activated on this HSM
  help      Print this message or the help of the given subcommand(s)

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops feature activate

```
Enable an HSM feature.

WARNING: Most features are static: once enabled they cannot be disabled, even by erasing the HSM.

Usage: entrust_ops feature activate [OPTIONS] <FILE>

Arguments:
  <FILE>
          An ASCII certificate file signed from Entrust for this particular HSM

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops feature info

```
Print which features have been activated on this HSM

Usage: entrust_ops feature info [OPTIONS]

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

## entrust_ops firmware

```
Manage HSM firmware

Usage: entrust_ops firmware [OPTIONS] <COMMAND>

Commands:
  file-info  Print information about an HSM firmware file
  write      Update the firmware on the HSM
  help       Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops firmware file-info

```
Print information about an HSM firmware file

Usage: entrust_ops firmware file-info [OPTIONS] <FILE>

Arguments:
  <FILE>  A binary NFF file for this particular HSM model

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops firmware write

```
Update the firmware on the HSM.

The HSM must be in maintenance mode.

Usage: entrust_ops firmware write [OPTIONS] <FILE>

Arguments:
  <FILE>
          A binary NFF file for this particular HSM model

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

## entrust_ops hsm

```
Manage the core aspects of the HSM

Usage: entrust_ops hsm [OPTIONS] <COMMAND>

Commands:
  create-world  Create a new Security World and enroll the HSM into it
  erase         Reinitialize the HSM state, generating a new module key
  info          Print status information about the hardserver and the HSM
  join-world    Enroll the HSM into an existing Security World
  restart       Restart the HSM, optionally switching to a different mode
  world-info    Print information about the HSM's current Security World
  help          Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops hsm create-world

```
Create a new Security World and enroll the HSM into it.

The HSM must be in initialization mode. This erases the HSM and writes to a single ACS smartcard.

Usage: entrust_ops hsm create-world [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops hsm erase

```
Reinitialize the HSM state, generating a new module key.

The HSM must be in initialization mode.

Usage: entrust_ops hsm erase [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops hsm info

```
Print status information about the hardserver and the HSM.

The hardserver is a host daemon that manages communication with the HSM.

Usage: entrust_ops hsm info [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops hsm join-world

```
Enroll the HSM into an existing Security World.

The HSM must be in initialization mode. This erases the HSM and requires the ACS smartcard.

Usage: entrust_ops hsm join-world [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops hsm restart

```
Restart the HSM, optionally switching to a different mode.

Note: The switch and jumpers on the HSM may be configured to restrict changing the mode in software.

Usage: entrust_ops hsm restart [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

      --mode <MODE>
          HSM boot mode
          
          [default: operational]

          Possible values:
          - initialization: Used to create or join an existing Security World
          - maintenance:    Used to upgrade firmware
          - operational:    Used for normal functionality

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops hsm world-info

```
Print information about the HSM's current Security World

Usage: entrust_ops hsm world-info [OPTIONS]

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

## entrust_ops meta

```
Commands about this tool

Usage: entrust_ops meta [OPTIONS] <COMMAND>

Commands:
  hash   Print the SHA-256 digest of this binary
  paths  Print the paths of things on the filesystem, reflecting the current environment variables
  help   Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops meta hash

```
Print the SHA-256 digest of this binary.

The digest is printed in hex and as a BIP-39 mnemonic.

Usage: entrust_ops meta hash [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops meta paths

```
Print the paths of things on the filesystem, reflecting the current environment variables.

The paths are controlled by the location of this executable and the environment variables $ENTRUST_INIT and $SIGNING_DIR.

Usage: entrust_ops meta paths [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

## entrust_ops realm

```
Commands for Juicebox-specific HSM and realm initialization

Usage: entrust_ops realm [OPTIONS] <COMMAND>

Commands:
  create-nvram-file  Allocate a section of the HSM's NVRAM
  create-keys        Create the secret keys for the Juicebox realm
  noise-public-key   Print the public key that clients will use to authenticate this realm
  print-acl          Print the ACL for an existing key
  help               Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops realm create-nvram-file

```
Allocate a section of the HSM's NVRAM.

An ACL on the NVRAM file ensures that it may only be accessed by the signed software.

Usage: entrust_ops realm create-nvram-file [OPTIONS] --signing-key-hash <SIGNING_KEY_HASH>

Options:
      --dry-run
          Don't execute commands but display them unambiguously

      --signing-key-hash <SIGNING_KEY_HASH>
          The hash of the signing key, given as 40 hex characters. Used in the ACL for the NVRAM file

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops realm create-keys

```
Create the secret keys for the Juicebox realm.

ACLs on the keys ensure that they may only be accessed by the signed software.

Usage: entrust_ops realm create-keys [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops realm noise-public-key

```
Print the public key that clients will use to authenticate this realm

Usage: entrust_ops realm noise-public-key [OPTIONS]

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops realm print-acl

```
Print the ACL for an existing key

Usage: entrust_ops realm print-acl [OPTIONS] <KEY>

Arguments:
  <KEY>
          Possible values:
          - mac:     Juicebox symmetric key used for HSM-to-HSM authentication
          - noise:   Juicebox asymmetric key used for client-HSM communication
          - record:  Juicebox symmetric key used for data encryption
          - signing: Asymmetric key used for signing HSM software and userdata

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

## entrust_ops sign

```
Manage signing keys and sign HSM software and userdata

Usage: entrust_ops sign [OPTIONS] <COMMAND>

Commands:
  create-key  Create a software signing key
  key-info    Print information about the signing key, including its hash
  software    Sign the HSM software binary
  userdata    Sign dummy HSM userdata
  help        Print this message or the help of the given subcommand(s)

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops sign create-key

```
Create a software signing key.

This will prompt for the OCS smartcard if not inserted.

Usage: entrust_ops sign create-key [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops sign key-info

```
Print information about the signing key, including its hash.

The ACLs refer to the signing key based on its hash.

Usage: entrust_ops sign key-info [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops sign software

```
Sign the HSM software binary.

This requires the OCS smartcard.

Usage: entrust_ops sign software [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

      --input <FILE>
          [default: /home/entrust_ops_test/juicebox-hsm-realm/target/powerpc-unknown-linux-gnu/release/entrust_hsm.elf]

      --output <FILE>
          [default: /home/entrust_ops_test/juicebox-hsm-realm/target/powerpc-unknown-linux-gnu/release/entrust_hsm.sar]

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops sign userdata

```
Sign dummy HSM userdata.

The userdata is a required file that may contain auxiliary information for the HSM software binary. Juicebox's software binary currently does not read this file, so its contents do not matter.

This requires the OCS smartcard.

Usage: entrust_ops sign userdata [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

      --tempfile <FILE>
          The path where the string "dummy" will be written
          
          [default: /home/entrust_ops_test/juicebox-hsm-realm/target/powerpc-unknown-linux-gnu/release/userdata.dummy]

      --output <FILE>
          [default: /home/entrust_ops_test/juicebox-hsm-realm/target/powerpc-unknown-linux-gnu/release/userdata.sar]

  -h, --help
          Print help (see a summary with '-h')
```

## entrust_ops smartcard

```
Manage HSM smartcards (which can contain sensitive keys).

Smartcards are inserted into a card reader that is directly attached to the HSM.

Usage: entrust_ops smartcard [OPTIONS] <COMMAND>

Commands:
  erase      Erase the contents of a smartcard, if possible
  info       Print information about the currently attached smartcard
  write-ocs  Write a new operator card (OCS)
  help       Print this message or the help of the given subcommand(s)

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops smartcard erase

```
Erase the contents of a smartcard, if possible.

It's possible to erase ACS cards, blank cards, and OCS cards from the current Security World. Due to restrictions in the underlying Entrust tools, it's not allowed to erase OCS cards from a different Security World.

Usage: entrust_ops smartcard erase [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

### entrust_ops smartcard info

```
Print information about the currently attached smartcard

Usage: entrust_ops smartcard info [OPTIONS]

Options:
      --dry-run  Don't execute commands but display them unambiguously
  -h, --help     Print help
```

### entrust_ops smartcard write-ocs

```
Write a new operator card (OCS).

The HSM must be in operational mode. This writes a cardset made up of a single operator card.

Usage: entrust_ops smartcard write-ocs [OPTIONS]

Options:
      --dry-run
          Don't execute commands but display them unambiguously

  -h, --help
          Print help (see a summary with '-h')
```

